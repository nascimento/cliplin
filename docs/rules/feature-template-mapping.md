---
rules: "1.0"
id: "feature-template-mapping"
title: "Feature-to-Template Mapping and Verification"
summary: "Explicit mapping of features to template generators. When modifying a feature that has a template reflection, you MUST verify and update the template so generated content matches the feature spec."
---

# Rules

- |
  Feature ↔ template reflection (MUST):
  - Some features have content generated by templates in src/cliplin/utils/templates.py (e.g. ADRs, README, rules). When cliplin init runs, these templates produce files for new projects.
  - When you modify a .feature file that has a template reflection, you MUST verify that the corresponding template function is updated so the generated content matches the new behavior.
  - Do not leave templates out of sync with features; new projects and AI assistants would receive outdated information.
- |
  Known feature ↔ template mappings:
  - docs/features/knowledge.feature ↔ create_knowledge_packages_adr in src/cliplin/utils/templates.py — generates docs/adrs/005-knowledge-packages.md content (subcommands, behavior, usage). Any change to knowledge scenarios (e.g. new subcommand like install, new option like --force) MUST be reflected in the template.
  - (Add more mappings here when features gain template reflections.)
- |
  Verification workflow (MUST when modifying a mapped feature):
  1. After modifying a .feature file, check docs/rules/feature-template-mapping.md for that feature.
  2. If the feature has a template mapping, open the corresponding template function in src/cliplin/utils/templates.py.
  3. Compare the template's generated content (strings, lists, descriptions) with the updated feature scenarios and acceptance criteria.
  4. Update the template so it matches the feature spec (subcommands, options, behavior, wording).
  5. Run cliplin init in a test directory to verify the generated output is correct, if needed.
- |
  When adding a new feature that will have generated content:
  - Add a template function in src/cliplin/utils/templates.py.
  - Add the feature ↔ template mapping to this rules file (known mappings section).
  - Document the verification requirement in .cursor/rules/feature-processing.mdc and docs/rules/cross-references-on-evolution.md.

# Code Refs

- "docs/features/"
- "src/cliplin/utils/templates.py"
- "docs/rules/cross-references-on-evolution.md"
- ".cursor/rules/feature-processing.mdc"
- ".cursor/rules/ai-hosts-templates.mdc"
